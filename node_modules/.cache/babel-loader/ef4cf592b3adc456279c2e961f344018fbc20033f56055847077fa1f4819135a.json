{"ast":null,"code":"var _jsxFileName = \"/Users/ryanmorrison/Code/narrativeforge/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Send, Settings, Music, BookOpen, ScrollText } from 'lucide-react';\nimport RoleplayInstructions from './RoleplayInstructions';\nimport MobilePhoneUI from './MobilePhoneUI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  character,\n  scenario,\n  onSaveChat,\n  geminiService,\n  onReset\n}) => {\n  _s();\n  var _scenario$setting, _scenario$setting2, _scenario$setting3, _scenario$otherCharac;\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [messageType, setMessageType] = useState('dialogue'); // dialogue, action, thought\n  const [isPhoneMode, setIsPhoneMode] = useState(false); // State to track if we're in phone mode\n  const [showInstructionsEditor, setShowInstructionsEditor] = useState(false);\n  const [showSettingsPanel, setShowSettingsPanel] = useState(false);\n  const [showMusicPanel, setShowMusicPanel] = useState(false);\n  const [showScenarioInfo, setShowScenarioInfo] = useState(false);\n  const [roleplayInstructions, setRoleplayInstructions] = useState((scenario === null || scenario === void 0 ? void 0 : scenario.roleplayInstructions) || '');\n  const messagesEndRef = useRef(null);\n\n  // When scenario changes, update the roleplay instructions\n  useEffect(() => {\n    if (scenario && scenario.roleplayInstructions) {\n      setRoleplayInstructions(scenario.roleplayInstructions);\n    }\n  }, [scenario]);\n\n  // Initial system message when the scenario begins\n  useEffect(() => {\n    if (scenario && !messages.length) {\n      // Create day header\n      const dayHeader = {\n        id: Date.now() - 2,\n        type: 'system',\n        content: 'Day 1, Late-night',\n        timestamp: new Date()\n      };\n\n      // Create initial narrative message describing the scenario\n      const formattedContent = scenario.initialSituation.replace(/TikTok/g, '🎵 TikTok').replace(/Instagram/g, '📱 Instagram').replace(/YouTube/g, '▶️ YouTube').replace(/Twitter/g, '🐦 Twitter').replace(/@([\\w]+)/g, '@$1').replace(/girlfriend/g, 'girlfriend 💔').replace(/video call/g, 'video call 📱').replace(/guitar/g, 'guitar 🎸').replace(/notifications/g, 'notifications 🔔');\n      const initialMessage = {\n        id: Date.now() - 1,\n        type: 'social',\n        content: formattedContent,\n        timestamp: new Date()\n      };\n      setMessages([dayHeader, initialMessage]);\n\n      // If there are roleplay instructions, set them but DON'T add them as a visible message\n      if (scenario.roleplayInstructions) {\n        setRoleplayInstructions(scenario.roleplayInstructions);\n      }\n\n      // Simulate AI thinking and then responding to set the scene\n      handleAiResponse();\n    }\n  }, [scenario]);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // Save roleplay instructions\n  const saveRoleplayInstructions = instructions => {\n    setRoleplayInstructions(instructions);\n    setShowInstructionsEditor(false);\n\n    // Don't add to visible messages, but update the AI context\n    if (geminiService) {\n      geminiService.updateInstructions(instructions);\n    }\n  };\n\n  // Cancel editing instructions\n  const cancelEditInstructions = () => {\n    setShowInstructionsEditor(false);\n  };\n\n  // Send user message\n  const handleSendMessage = customText => {\n    // Use either the custom text or the inputValue\n    const messageText = customText || inputValue;\n\n    // Check that we have a valid string to work with\n    if (!messageText) return;\n    // Ensure messageText is a string before calling trim\n    if (typeof messageText !== 'string' || !messageText.trim()) return;\n\n    // Check for phone mode commands\n    // Ensure messageText is a string before calling toLowerCase\n    const lowerText = typeof messageText === 'string' ? messageText.toLowerCase() : '';\n    if (lowerText.includes('check my phone') || lowerText.includes('look at my phone') || lowerText.includes('check phone') || lowerText.includes('use my phone')) {\n      setIsPhoneMode(true);\n    } else if (lowerText.includes('put phone away') || lowerText.includes('stop using phone') || lowerText.includes('put away phone') || lowerText.includes('exit phone')) {\n      setIsPhoneMode(false);\n    }\n\n    // Detect message type based on content and chosen type\n    let detectedType = messageType;\n\n    // Detect social media messages\n    if (messageText.includes('@') || messageText.includes('#') || messageText.includes('Instagram') || messageText.includes('TikTok') || messageText.includes('YouTube') || messageText.includes('Twitter') || messageText.includes('followers') || messageText.includes('likes') || messageText.includes('Message Requests:')) {\n      detectedType = 'social';\n    }\n\n    // Add day header if this is the first message in a while\n    const now = new Date();\n    if (messages.length > 0) {\n      const lastMessageTime = messages[messages.length - 1].timestamp;\n      // If more than 3 hours since last message, add a timestamp header\n      if ((now - lastMessageTime) / (1000 * 60 * 60) > 3) {\n        const dayHeader = {\n          id: Date.now() - 1,\n          // Ensure unique ID\n          type: 'system',\n          content: getDayHeaderText(now),\n          timestamp: now\n        };\n        setMessages(prev => [...prev, dayHeader]);\n      }\n    }\n\n    // Create user message object\n    const userMessage = {\n      id: Date.now(),\n      sender: 'user',\n      type: detectedType,\n      content: messageText,\n      timestamp: now\n    };\n\n    // Add message to chat\n    setMessages(prev => [...prev, userMessage]);\n\n    // Clear input field\n    setInputValue('');\n\n    // Process with AI\n    handleAiResponse(userMessage.content, userMessage.type);\n  };\n\n  // Helper function to get appropriate day header text\n  const getDayHeaderText = date => {\n    const hours = date.getHours();\n    let timeOfDay = '';\n    if (hours >= 5 && hours < 12) {\n      timeOfDay = 'Morning';\n    } else if (hours >= 12 && hours < 17) {\n      timeOfDay = 'Afternoon';\n    } else if (hours >= 17 && hours < 22) {\n      timeOfDay = 'Evening';\n    } else {\n      timeOfDay = 'Late-night';\n    }\n    return `Day ${Math.floor(Math.random() * 5 + 1)}, ${timeOfDay}`;\n  };\n\n  // Handle key press (Enter to send)\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Get AI response\n  const handleAiResponse = async (userMessage, messageType) => {\n    setIsTyping(true);\n    try {\n      let responseContent;\n\n      // If we have a Gemini service, use it\n      if (geminiService) {\n        // For the first message, include roleplay instructions if they exist\n        if (!userMessage && roleplayInstructions) {\n          // Add it to the context for the AI but don't show it in chat\n          const initPrompt = `Initial scene: ${scenario.initialSituation}\\n\\nRoleplay instructions:\\n${roleplayInstructions}\\n\\nPlease respond with an opening for this scene, following the roleplay instructions but without mentioning them directly.`;\n          responseContent = await geminiService.generateGeneric(initPrompt);\n        } else {\n          responseContent = await geminiService.generateResponse(userMessage, messageType);\n        }\n      } else {\n        // Fallback for development\n        await new Promise(resolve => setTimeout(resolve, 1500));\n        responseContent = \"This is a placeholder response. In the full implementation, this would be a response from Google's Gemini LLM, responding appropriately to your character's situation.\";\n      }\n\n      // Check if the AI response is implying phone interaction\n      const lowerResponse = responseContent.toLowerCase();\n      if (lowerResponse.includes('on your phone') || lowerResponse.includes('your phone shows') || lowerResponse.includes('on the screen of your phone')) {\n        // Activate phone mode if AI refers to phone content\n        setIsPhoneMode(true);\n      }\n\n      // Detect if this should be a social media response\n      let responseType = 'dialogue';\n      if (messageType === 'social' || responseContent && (responseContent.includes('@') || responseContent.includes('Instagram') || responseContent.includes('TikTok') || responseContent.includes('followers'))) {\n        responseType = 'social';\n      } else if (messageType === 'action') {\n        responseType = 'action';\n      } else if (messageType === 'thought') {\n        responseType = 'thought';\n      }\n      const aiMessage = {\n        id: Date.now(),\n        sender: 'ai',\n        type: responseType,\n        content: responseContent,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n\n      // Add error message\n      const errorMessage = {\n        id: Date.now(),\n        sender: 'system',\n        type: 'error',\n        content: 'There was an error getting a response. Please try again.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  // Format message based on type\n  const formatMessage = message => {\n    // Helper function to format text with paragraphs and line breaks\n    const formatText = text => {\n      if (!text) return '';\n\n      // Format social media messages with proper styling\n      if (text.includes('@') || text.includes('#') || text.includes('Instagram') || text.includes('TikTok')) {\n        // Add emoji and styling to social media content\n        const formattedText = text.replace(/Instagram/g, '📱 Instagram').replace(/TikTok/g, '🎵 TikTok').replace(/YouTube/g, '▶️ YouTube').replace(/Twitter/g, '🐦 Twitter').replace(/direct message/gi, 'DM 💬').replace(/@([\\w]+)/g, '<span class=\"handle\">@$1</span>').replace(/\"([^\"]+)\"/g, '<span class=\"quote\">\"$1\"</span>').replace(/\\bviral\\b/g, '<span class=\"highlight\">viral</span>').replace(/\\bfollowers\\b/g, 'followers 👥').replace(/\\blikes\\b/g, 'likes ❤️').replace(/\\bcomments\\b/g, 'comments 💬').replace(/\\bshares\\b/g, 'shares 🔄');\n\n        // Split by paragraphs for better mobile display\n        const paragraphs = formattedText.split(/\\n\\s*\\n/);\n        return paragraphs.map((para, i) => {\n          const processedPara = para.replace(/\\n/g, '<br />');\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            dangerouslySetInnerHTML: {\n              __html: processedPara\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 18\n          }, this);\n        });\n      }\n\n      // For message lists like the Instagram DM requests\n      if (text.includes('Instagram Message Requests:')) {\n        const sections = text.split(/\\n\\s*\\n/);\n        return sections.map((section, i) => {\n          if (section.includes('•')) {\n            // This is a list section\n            const listItems = section.split('•').filter(item => item.trim());\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-list\",\n              children: listItems.map((item, j) => {\n                // Check if this contains a username and message\n                const parts = item.split(/\\n/);\n                if (parts.length > 1) {\n                  const username = parts[0].trim();\n                  const messageText = parts.slice(1).join('\\n').trim();\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"dm-message\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dm-username\",\n                      children: username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dm-content\",\n                      children: /*#__PURE__*/_jsxDEV(\"em\", {\n                        children: [\"\\\"\", messageText, \"\\\"\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 311,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 311,\n                      columnNumber: 25\n                    }, this)]\n                  }, j, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 23\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: item.trim()\n                  }, j, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 28\n                  }, this);\n                }\n              })\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this);\n          } else {\n            // Regular paragraph\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: section\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 20\n            }, this);\n          }\n        });\n      }\n\n      // Regular content - split by paragraphs\n      const paragraphs = text.split(/\\n\\s*\\n/);\n      return paragraphs.map((para, i) => {\n        // Replace single newlines with <br>\n        const formattedPara = para.replace(/\\n/g, '<br />');\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          dangerouslySetInnerHTML: {\n            __html: formattedPara\n          }\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 16\n        }, this);\n      });\n    };\n\n    // Create a timestamp element\n    const timestamp = /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"timestamp\",\n      children: message.timestamp.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this);\n    switch (message.type) {\n      case 'system':\n        // For system messages like day headers\n        if (message.content.startsWith('Day ') || message.content.includes('Late-night')) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"day-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"day-marker\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"system-message\",\n          children: formatText(message.content)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 16\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 16\n        }, this);\n      case 'dialogue':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `dialogue-message ${message.sender}`,\n          children: [formatText(message.content), timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this);\n      case 'action':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `action-message ${message.sender}`,\n          children: [formatText(message.content), timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this);\n      case 'thought':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `thought-message ${message.sender}`,\n          children: [formatText(message.content), timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this);\n      case 'social':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `social-message ${message.sender}`,\n          children: [formatText(message.content), timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender}`,\n          children: [formatText(message.content), timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: (scenario === null || scenario === void 0 ? void 0 : scenario.title) || 'Untitled Scenario'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn reset-chat-btn\",\n          onClick: onReset,\n          title: \"Start Over\",\n          children: \"Start Over\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowInstructionsEditor(true),\n          title: \"View/Edit Roleplay Instructions\",\n          children: /*#__PURE__*/_jsxDEV(ScrollText, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowSettingsPanel(true),\n          title: \"Roleplay Settings\",\n          children: /*#__PURE__*/_jsxDEV(Settings, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowMusicPanel(true),\n          title: \"Ambient Music\",\n          children: /*#__PURE__*/_jsxDEV(Music, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowScenarioInfo(true),\n          title: \"View Scenario Details\",\n          children: /*#__PURE__*/_jsxDEV(BookOpen, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [isPhoneMode ? /*#__PURE__*/_jsxDEV(MobilePhoneUI, {\n        messages: messages,\n        onSendMessage: handleSendMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this) : (/* Regular message display */\n      messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message-wrapper ${message.sender}`,\n        children: [formatMessage(message), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"timestamp\",\n          children: message.timestamp.toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 13\n      }, this))), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-type-selector\",\n      style: {\n        display: isPhoneMode ? 'none' : 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `type-btn ${messageType === 'dialogue' ? 'active' : ''}`,\n        onClick: () => setMessageType('dialogue'),\n        children: \"Dialogue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `type-btn ${messageType === 'action' ? 'active' : ''}`,\n        onClick: () => setMessageType('action'),\n        children: \"Action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `type-btn ${messageType === 'thought' ? 'active' : ''}`,\n        onClick: () => setMessageType('thought'),\n        children: \"Thought\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `type-btn ${messageType === 'social' ? 'active' : ''}`,\n        onClick: () => setMessageType('social'),\n        children: \"Social\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), !isPhoneMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: handleKeyPress,\n        placeholder: messageType === 'dialogue' ? 'Type your dialogue...' : messageType === 'action' ? 'Describe your action...' : messageType === 'thought' ? 'Share your thoughts...' : 'Type social media content, DMs, or notifications...',\n        rows: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"send-btn\",\n        onClick: handleSendMessage,\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 9\n    }, this), isPhoneMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"phone-mode-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"exit-phone-btn\",\n        onClick: () => setIsPhoneMode(false),\n        children: \"Put Phone Away\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 9\n    }, this), showInstructionsEditor && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: /*#__PURE__*/_jsxDEV(RoleplayInstructions, {\n          instructions: roleplayInstructions,\n          onSave: saveRoleplayInstructions,\n          onCancel: cancelEditInstructions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 9\n    }, this), showSettingsPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Roleplay Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowSettingsPanel(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"settings-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"AI Response Style\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"setting-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Temperature:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0.3\",\n                  children: \"More Focused (0.3)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0.7\",\n                  selected: true,\n                  children: \"Balanced (0.7)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1.0\",\n                  children: \"More Creative (1.0)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"setting-description\",\n              children: \"Lower values make responses more predictable, higher values make them more creative.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"settings-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Display Settings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"setting-control\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 21\n                }, this), \" Dark Mode\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"setting-control\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 21\n                }, this), \" Show Timestamps\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"save-settings-btn\",\n            children: \"Save Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 9\n    }, this), showMusicPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Ambient Music\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowMusicPanel(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Choose background music to enhance your roleplay experience:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"music-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-option\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Atmospheric\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Gentle Ambient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Dark Ambient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Space\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-option\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Emotional\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Melancholic\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Hopeful\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Tense\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-option\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Location-based\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Nature Sounds\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Urban\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-btn\",\n                children: \"\\u25B6\\uFE0F Rain & Thunder\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"music-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"Stop Music\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Volume:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"100\",\n                value: \"70\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"music-note\",\n            children: \"Music feature coming soon! This is a placeholder interface.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 9\n    }, this), showScenarioInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Scenario Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowScenarioInfo(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-body scenario-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: (scenario === null || scenario === void 0 ? void 0 : scenario.title) || 'Untitled Scenario'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Setting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 20\n              }, this), \" \", (scenario === null || scenario === void 0 ? void 0 : (_scenario$setting = scenario.setting) === null || _scenario$setting === void 0 ? void 0 : _scenario$setting.location) || 'Not specified']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 20\n              }, this), \" \", (scenario === null || scenario === void 0 ? void 0 : (_scenario$setting2 = scenario.setting) === null || _scenario$setting2 === void 0 ? void 0 : _scenario$setting2.time) || 'Not specified']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Atmosphere:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 20\n              }, this), \" \", (scenario === null || scenario === void 0 ? void 0 : (_scenario$setting3 = scenario.setting) === null || _scenario$setting3 === void 0 ? void 0 : _scenario$setting3.atmosphere) || 'Not specified']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Your Character\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 20\n              }, this), \" \", (character === null || character === void 0 ? void 0 : character.name) || 'Unnamed']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Age:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 20\n              }, this), \" \", (character === null || character === void 0 ? void 0 : character.age) || 'Not specified']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Other Characters\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 17\n            }, this), (scenario === null || scenario === void 0 ? void 0 : (_scenario$otherCharac = scenario.otherCharacters) === null || _scenario$otherCharac === void 0 ? void 0 : _scenario$otherCharac.map((char, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"other-character\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: char.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 24\n                }, this), \" (\", char.role, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: char.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 19\n            }, this))) || /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No other characters specified.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Narrative Goals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (scenario === null || scenario === void 0 ? void 0 : scenario.narrativeGoals) || 'No specific goals set.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Tone & Themes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (scenario === null || scenario === void 0 ? void 0 : scenario.toneAndThemes) || 'Not specified'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 402,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"qczPrlFX29uaffrId18YJA/DoqI=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Send","Settings","Music","BookOpen","ScrollText","RoleplayInstructions","MobilePhoneUI","jsxDEV","_jsxDEV","ChatInterface","character","scenario","onSaveChat","geminiService","onReset","_s","_scenario$setting","_scenario$setting2","_scenario$setting3","_scenario$otherCharac","messages","setMessages","inputValue","setInputValue","isTyping","setIsTyping","messageType","setMessageType","isPhoneMode","setIsPhoneMode","showInstructionsEditor","setShowInstructionsEditor","showSettingsPanel","setShowSettingsPanel","showMusicPanel","setShowMusicPanel","showScenarioInfo","setShowScenarioInfo","roleplayInstructions","setRoleplayInstructions","messagesEndRef","length","dayHeader","id","Date","now","type","content","timestamp","formattedContent","initialSituation","replace","initialMessage","handleAiResponse","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","saveRoleplayInstructions","instructions","updateInstructions","cancelEditInstructions","handleSendMessage","customText","messageText","trim","lowerText","toLowerCase","includes","detectedType","lastMessageTime","getDayHeaderText","prev","userMessage","sender","date","hours","getHours","timeOfDay","Math","floor","random","handleKeyPress","e","key","shiftKey","preventDefault","responseContent","initPrompt","generateGeneric","generateResponse","Promise","resolve","setTimeout","lowerResponse","responseType","aiMessage","error","console","errorMessage","formatMessage","message","formatText","text","formattedText","paragraphs","split","map","para","i","processedPara","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","sections","section","listItems","filter","item","className","children","j","parts","username","slice","join","formattedPara","toLocaleTimeString","hour","minute","startsWith","title","onClick","size","onSendMessage","ref","style","display","value","onChange","target","onKeyDown","placeholder","rows","onSave","onCancel","selected","checked","min","max","setting","location","time","atmosphere","name","age","otherCharacters","char","index","role","description","narrativeGoals","toneAndThemes","_c","$RefreshReg$"],"sources":["/Users/ryanmorrison/Code/narrativeforge/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Send, Settings, Music, BookOpen, ScrollText } from 'lucide-react';\nimport RoleplayInstructions from './RoleplayInstructions';\nimport MobilePhoneUI from './MobilePhoneUI';\n\nconst ChatInterface = ({ character, scenario, onSaveChat, geminiService, onReset }) => {\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [messageType, setMessageType] = useState('dialogue'); // dialogue, action, thought\n  const [isPhoneMode, setIsPhoneMode] = useState(false); // State to track if we're in phone mode\n  const [showInstructionsEditor, setShowInstructionsEditor] = useState(false);\n  const [showSettingsPanel, setShowSettingsPanel] = useState(false);\n  const [showMusicPanel, setShowMusicPanel] = useState(false);\n  const [showScenarioInfo, setShowScenarioInfo] = useState(false);\n  const [roleplayInstructions, setRoleplayInstructions] = useState(scenario?.roleplayInstructions || '');\n  const messagesEndRef = useRef(null);\n  \n  // When scenario changes, update the roleplay instructions\n  useEffect(() => {\n    if (scenario && scenario.roleplayInstructions) {\n      setRoleplayInstructions(scenario.roleplayInstructions);\n    }\n  }, [scenario]);\n  \n  // Initial system message when the scenario begins\n  useEffect(() => {\n    if (scenario && !messages.length) {\n      // Create day header\n      const dayHeader = {\n        id: Date.now() - 2,\n        type: 'system',\n        content: 'Day 1, Late-night',\n        timestamp: new Date()\n      };\n      \n      // Create initial narrative message describing the scenario\n      const formattedContent = scenario.initialSituation\n        .replace(/TikTok/g, '🎵 TikTok')\n        .replace(/Instagram/g, '📱 Instagram')\n        .replace(/YouTube/g, '▶️ YouTube')\n        .replace(/Twitter/g, '🐦 Twitter')\n        .replace(/@([\\w]+)/g, '@$1')\n        .replace(/girlfriend/g, 'girlfriend 💔')\n        .replace(/video call/g, 'video call 📱')\n        .replace(/guitar/g, 'guitar 🎸')\n        .replace(/notifications/g, 'notifications 🔔');\n      \n      const initialMessage = {\n        id: Date.now() - 1,\n        type: 'social',\n        content: formattedContent,\n        timestamp: new Date()\n      };\n      \n      setMessages([dayHeader, initialMessage]);\n      \n      // If there are roleplay instructions, set them but DON'T add them as a visible message\n      if (scenario.roleplayInstructions) {\n        setRoleplayInstructions(scenario.roleplayInstructions);\n      }\n      \n      // Simulate AI thinking and then responding to set the scene\n      handleAiResponse();\n    }\n  }, [scenario]);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  // Save roleplay instructions\n  const saveRoleplayInstructions = (instructions) => {\n    setRoleplayInstructions(instructions);\n    setShowInstructionsEditor(false);\n    \n    // Don't add to visible messages, but update the AI context\n    if (geminiService) {\n      geminiService.updateInstructions(instructions);\n    }\n  };\n\n  // Cancel editing instructions\n  const cancelEditInstructions = () => {\n    setShowInstructionsEditor(false);\n  };\n\n  // Send user message\n  const handleSendMessage = (customText) => {\n    // Use either the custom text or the inputValue\n    const messageText = customText || inputValue;\n    \n    // Check that we have a valid string to work with\n    if (!messageText) return;\n    // Ensure messageText is a string before calling trim\n    if (typeof messageText !== 'string' || !messageText.trim()) return;\n    \n    // Check for phone mode commands\n    // Ensure messageText is a string before calling toLowerCase\n    const lowerText = typeof messageText === 'string' ? messageText.toLowerCase() : '';\n    if (lowerText.includes('check my phone') || lowerText.includes('look at my phone') || \n        lowerText.includes('check phone') || lowerText.includes('use my phone')) {\n      setIsPhoneMode(true);\n    } else if (lowerText.includes('put phone away') || lowerText.includes('stop using phone') || \n               lowerText.includes('put away phone') || lowerText.includes('exit phone')) {\n      setIsPhoneMode(false);\n    }\n    \n    // Detect message type based on content and chosen type\n    let detectedType = messageType;\n    \n    // Detect social media messages\n    if (messageText.includes('@') || messageText.includes('#') || \n        messageText.includes('Instagram') || messageText.includes('TikTok') || \n        messageText.includes('YouTube') || messageText.includes('Twitter') ||\n        messageText.includes('followers') || messageText.includes('likes') ||\n        messageText.includes('Message Requests:')) {\n      detectedType = 'social';\n    }\n    \n    // Add day header if this is the first message in a while\n    const now = new Date();\n    if (messages.length > 0) {\n      const lastMessageTime = messages[messages.length - 1].timestamp;\n      // If more than 3 hours since last message, add a timestamp header\n      if ((now - lastMessageTime) / (1000 * 60 * 60) > 3) {\n        const dayHeader = {\n          id: Date.now() - 1, // Ensure unique ID\n          type: 'system',\n          content: getDayHeaderText(now),\n          timestamp: now\n        };\n        setMessages(prev => [...prev, dayHeader]);\n      }\n    }\n    \n    // Create user message object\n    const userMessage = {\n      id: Date.now(),\n      sender: 'user',\n      type: detectedType,\n      content: messageText,\n      timestamp: now\n    };\n    \n    // Add message to chat\n    setMessages(prev => [...prev, userMessage]);\n    \n    // Clear input field\n    setInputValue('');\n    \n    // Process with AI\n    handleAiResponse(userMessage.content, userMessage.type);\n  };\n  \n  // Helper function to get appropriate day header text\n  const getDayHeaderText = (date) => {\n    const hours = date.getHours();\n    let timeOfDay = '';\n    \n    if (hours >= 5 && hours < 12) {\n      timeOfDay = 'Morning';\n    } else if (hours >= 12 && hours < 17) {\n      timeOfDay = 'Afternoon';\n    } else if (hours >= 17 && hours < 22) {\n      timeOfDay = 'Evening';\n    } else {\n      timeOfDay = 'Late-night';\n    }\n    \n    return `Day ${Math.floor(Math.random() * 5 + 1)}, ${timeOfDay}`;\n  };\n\n  // Handle key press (Enter to send)\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Get AI response\n  const handleAiResponse = async (userMessage, messageType) => {\n    setIsTyping(true);\n    \n    try {\n      let responseContent;\n      \n      // If we have a Gemini service, use it\n      if (geminiService) {\n        // For the first message, include roleplay instructions if they exist\n        if (!userMessage && roleplayInstructions) {\n          // Add it to the context for the AI but don't show it in chat\n          const initPrompt = `Initial scene: ${scenario.initialSituation}\\n\\nRoleplay instructions:\\n${roleplayInstructions}\\n\\nPlease respond with an opening for this scene, following the roleplay instructions but without mentioning them directly.`;\n          responseContent = await geminiService.generateGeneric(initPrompt);\n        } else {\n          responseContent = await geminiService.generateResponse(userMessage, messageType);\n        }\n      } else {\n        // Fallback for development\n        await new Promise(resolve => setTimeout(resolve, 1500));\n        responseContent = \"This is a placeholder response. In the full implementation, this would be a response from Google's Gemini LLM, responding appropriately to your character's situation.\";\n      }\n      \n      // Check if the AI response is implying phone interaction\n      const lowerResponse = responseContent.toLowerCase();\n      if (lowerResponse.includes('on your phone') || \n          lowerResponse.includes('your phone shows') || \n          lowerResponse.includes('on the screen of your phone')) {\n        // Activate phone mode if AI refers to phone content\n        setIsPhoneMode(true);\n      }\n      \n      // Detect if this should be a social media response\n      let responseType = 'dialogue';\n      if (messageType === 'social' || \n          (responseContent && (responseContent.includes('@') || \n                             responseContent.includes('Instagram') || \n                             responseContent.includes('TikTok') || \n                             responseContent.includes('followers')))) {\n        responseType = 'social';\n      } else if (messageType === 'action') {\n        responseType = 'action';\n      } else if (messageType === 'thought') {\n        responseType = 'thought';\n      }\n      \n      const aiMessage = {\n        id: Date.now(),\n        sender: 'ai',\n        type: responseType,\n        content: responseContent,\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, aiMessage]);\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      \n      // Add error message\n      const errorMessage = {\n        id: Date.now(),\n        sender: 'system',\n        type: 'error',\n        content: 'There was an error getting a response. Please try again.',\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  // Format message based on type\n  const formatMessage = (message) => {\n    // Helper function to format text with paragraphs and line breaks\n    const formatText = (text) => {\n      if (!text) return '';\n      \n      // Format social media messages with proper styling\n      if (text.includes('@') || text.includes('#') || text.includes('Instagram') || text.includes('TikTok')) {\n        // Add emoji and styling to social media content\n        const formattedText = text\n          .replace(/Instagram/g, '📱 Instagram')\n          .replace(/TikTok/g, '🎵 TikTok')\n          .replace(/YouTube/g, '▶️ YouTube')\n          .replace(/Twitter/g, '🐦 Twitter')\n          .replace(/direct message/gi, 'DM 💬')\n          .replace(/@([\\w]+)/g, '<span class=\"handle\">@$1</span>')\n          .replace(/\"([^\"]+)\"/g, '<span class=\"quote\">\"$1\"</span>')\n          .replace(/\\bviral\\b/g, '<span class=\"highlight\">viral</span>')\n          .replace(/\\bfollowers\\b/g, 'followers 👥')\n          .replace(/\\blikes\\b/g, 'likes ❤️')\n          .replace(/\\bcomments\\b/g, 'comments 💬')\n          .replace(/\\bshares\\b/g, 'shares 🔄');\n          \n        // Split by paragraphs for better mobile display\n        const paragraphs = formattedText.split(/\\n\\s*\\n/);\n        return paragraphs.map((para, i) => {\n          const processedPara = para.replace(/\\n/g, '<br />');\n          return <p key={i} dangerouslySetInnerHTML={{ __html: processedPara }} />;\n        });\n      }\n      \n      // For message lists like the Instagram DM requests\n      if (text.includes('Instagram Message Requests:')) {\n        const sections = text.split(/\\n\\s*\\n/);\n        \n        return sections.map((section, i) => {\n          if (section.includes('•')) {\n            // This is a list section\n            const listItems = section.split('•').filter(item => item.trim());\n            return (\n              <div key={i} className=\"message-list\">\n                {listItems.map((item, j) => {\n                  // Check if this contains a username and message\n                  const parts = item.split(/\\n/);\n                  if (parts.length > 1) {\n                    const username = parts[0].trim();\n                    const messageText = parts.slice(1).join('\\n').trim();\n                    \n                    return (\n                      <div key={j} className=\"dm-message\">\n                        <div className=\"dm-username\">{username}</div>\n                        <div className=\"dm-content\"><em>\"{messageText}\"</em></div>\n                      </div>\n                    );\n                  } else {\n                    return <p key={j}>{item.trim()}</p>;\n                  }\n                })}\n              </div>\n            );\n          } else {\n            // Regular paragraph\n            return <p key={i}>{section}</p>;\n          }\n        });\n      }\n      \n      // Regular content - split by paragraphs\n      const paragraphs = text.split(/\\n\\s*\\n/);\n      \n      return paragraphs.map((para, i) => {\n        // Replace single newlines with <br>\n        const formattedPara = para.replace(/\\n/g, '<br />');\n        return <p key={i} dangerouslySetInnerHTML={{ __html: formattedPara }} />;\n      });\n    };\n    \n    // Create a timestamp element\n    const timestamp = (\n      <span className=\"timestamp\">\n        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n      </span>\n    );\n    \n    switch (message.type) {\n      case 'system':\n        // For system messages like day headers\n        if (message.content.startsWith('Day ') || message.content.includes('Late-night')) {\n          return (\n            <div className=\"day-header\">\n              <div className=\"day-marker\">{message.content}</div>\n            </div>\n          );\n        }\n        return <div className=\"system-message\">{formatText(message.content)}</div>;\n        \n      case 'error':\n        return <div className=\"error-message\">{message.content}</div>;\n        \n      case 'dialogue':\n        return (\n          <div className={`dialogue-message ${message.sender}`}>\n            {formatText(message.content)}\n            {timestamp}\n          </div>\n        );\n        \n      case 'action':\n        return (\n          <div className={`action-message ${message.sender}`}>\n            {formatText(message.content)}\n            {timestamp}\n          </div>\n        );\n        \n      case 'thought':\n        return (\n          <div className={`thought-message ${message.sender}`}>\n            {formatText(message.content)}\n            {timestamp}\n          </div>\n        );\n        \n      case 'social':\n        return (\n          <div className={`social-message ${message.sender}`}>\n            {formatText(message.content)}\n            {timestamp}\n          </div>\n        );\n        \n      default:\n        return (\n          <div className={`message ${message.sender}`}>\n            {formatText(message.content)}\n            {timestamp}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"chat-interface\">\n      <div className=\"chat-header\">\n        <h2>{scenario?.title || 'Untitled Scenario'}</h2>\n        <div className=\"chat-controls\">\n          <button \n            className=\"control-btn reset-chat-btn\" \n            onClick={onReset}\n            title=\"Start Over\"\n          >\n            Start Over\n          </button>\n          <button \n            className=\"control-btn\" \n            onClick={() => setShowInstructionsEditor(true)}\n            title=\"View/Edit Roleplay Instructions\"\n          >\n            <ScrollText size={18} />\n          </button>\n          <button \n            className=\"control-btn\"\n            onClick={() => setShowSettingsPanel(true)}\n            title=\"Roleplay Settings\"\n          >\n            <Settings size={18} />\n          </button>\n          <button \n            className=\"control-btn\"\n            onClick={() => setShowMusicPanel(true)}\n            title=\"Ambient Music\"\n          >\n            <Music size={18} />\n          </button>\n          <button \n            className=\"control-btn\"\n            onClick={() => setShowScenarioInfo(true)}\n            title=\"View Scenario Details\"\n          >\n            <BookOpen size={18} />\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"messages-container\">\n        {/* Mobile Phone UI when in phone mode */}\n        {isPhoneMode ? (\n          <MobilePhoneUI \n            messages={messages} \n            onSendMessage={handleSendMessage}\n          />\n        ) : (\n          /* Regular message display */\n          messages.map(message => (\n            <div key={message.id} className={`message-wrapper ${message.sender}`}>\n              {formatMessage(message)}\n              <span className=\"timestamp\">\n                {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n              </span>\n            </div>\n          ))\n        )}\n        \n        {isTyping && (\n          <div className=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n      \n      <div className=\"message-type-selector\" style={{ display: isPhoneMode ? 'none' : 'flex' }}>\n        <button \n          className={`type-btn ${messageType === 'dialogue' ? 'active' : ''}`}\n          onClick={() => setMessageType('dialogue')}\n        >\n          Dialogue\n        </button>\n        <button \n          className={`type-btn ${messageType === 'action' ? 'active' : ''}`}\n          onClick={() => setMessageType('action')}\n        >\n          Action\n        </button>\n        <button \n          className={`type-btn ${messageType === 'thought' ? 'active' : ''}`}\n          onClick={() => setMessageType('thought')}\n        >\n          Thought\n        </button>\n        <button \n          className={`type-btn ${messageType === 'social' ? 'active' : ''}`}\n          onClick={() => setMessageType('social')}\n        >\n          Social\n        </button>\n      </div>\n      \n      {/* Regular input area - hidden in phone mode */}\n      {!isPhoneMode && (\n        <div className=\"input-area\">\n          <textarea \n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            onKeyDown={handleKeyPress}\n            placeholder={messageType === 'dialogue' ? 'Type your dialogue...' : \n                        messageType === 'action' ? 'Describe your action...' : \n                        messageType === 'thought' ? 'Share your thoughts...' :\n                        'Type social media content, DMs, or notifications...'}\n            rows={3}\n          />\n          <button className=\"send-btn\" onClick={handleSendMessage}>\n            <Send size={20} />\n          </button>\n        </div>\n      )}\n      \n      {/* Exit phone mode button - only shown in phone mode */}\n      {isPhoneMode && (\n        <div className=\"phone-mode-footer\">\n          <button className=\"exit-phone-btn\" onClick={() => setIsPhoneMode(false)}>\n            Put Phone Away\n          </button>\n        </div>\n      )}\n\n      {/* Roleplay Instructions Modal */}\n      {showInstructionsEditor && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <RoleplayInstructions \n              instructions={roleplayInstructions}\n              onSave={saveRoleplayInstructions}\n              onCancel={cancelEditInstructions}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Settings Panel */}\n      {showSettingsPanel && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"panel-header\">\n              <h3>Roleplay Settings</h3>\n              <button className=\"close-btn\" onClick={() => setShowSettingsPanel(false)}>×</button>\n            </div>\n            <div className=\"panel-body\">\n              <div className=\"settings-section\">\n                <h4>AI Response Style</h4>\n                <div className=\"setting-control\">\n                  <label>Temperature:</label>\n                  <select>\n                    <option value=\"0.3\">More Focused (0.3)</option>\n                    <option value=\"0.7\" selected>Balanced (0.7)</option>\n                    <option value=\"1.0\">More Creative (1.0)</option>\n                  </select>\n                </div>\n                <p className=\"setting-description\">Lower values make responses more predictable, higher values make them more creative.</p>\n              </div>\n              \n              <div className=\"settings-section\">\n                <h4>Display Settings</h4>\n                <div className=\"setting-control\">\n                  <label>\n                    <input type=\"checkbox\" /> Dark Mode\n                  </label>\n                </div>\n                <div className=\"setting-control\">\n                  <label>\n                    <input type=\"checkbox\" checked /> Show Timestamps\n                  </label>\n                </div>\n              </div>\n              \n              <button className=\"save-settings-btn\">Save Settings</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Music Panel */}\n      {showMusicPanel && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"panel-header\">\n              <h3>Ambient Music</h3>\n              <button className=\"close-btn\" onClick={() => setShowMusicPanel(false)}>×</button>\n            </div>\n            <div className=\"panel-body\">\n              <p>Choose background music to enhance your roleplay experience:</p>\n              \n              <div className=\"music-options\">\n                <div className=\"music-option\">\n                  <h4>Atmospheric</h4>\n                  <button className=\"play-btn\">▶️ Gentle Ambient</button>\n                  <button className=\"play-btn\">▶️ Dark Ambient</button>\n                  <button className=\"play-btn\">▶️ Space</button>\n                </div>\n                \n                <div className=\"music-option\">\n                  <h4>Emotional</h4>\n                  <button className=\"play-btn\">▶️ Melancholic</button>\n                  <button className=\"play-btn\">▶️ Hopeful</button>\n                  <button className=\"play-btn\">▶️ Tense</button>\n                </div>\n                \n                <div className=\"music-option\">\n                  <h4>Location-based</h4>\n                  <button className=\"play-btn\">▶️ Nature Sounds</button>\n                  <button className=\"play-btn\">▶️ Urban</button>\n                  <button className=\"play-btn\">▶️ Rain & Thunder</button>\n                </div>\n              </div>\n              \n              <div className=\"music-controls\">\n                <button>Stop Music</button>\n                <div className=\"volume-control\">\n                  <label>Volume:</label>\n                  <input type=\"range\" min=\"0\" max=\"100\" value=\"70\" />\n                </div>\n              </div>\n              \n              <p className=\"music-note\">Music feature coming soon! This is a placeholder interface.</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Scenario Info Panel */}\n      {showScenarioInfo && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"panel-header\">\n              <h3>Scenario Details</h3>\n              <button className=\"close-btn\" onClick={() => setShowScenarioInfo(false)}>×</button>\n            </div>\n            <div className=\"panel-body scenario-info\">\n              <h4>{scenario?.title || 'Untitled Scenario'}</h4>\n              \n              <div className=\"info-section\">\n                <h5>Setting</h5>\n                <p><strong>Location:</strong> {scenario?.setting?.location || 'Not specified'}</p>\n                <p><strong>Time:</strong> {scenario?.setting?.time || 'Not specified'}</p>\n                <p><strong>Atmosphere:</strong> {scenario?.setting?.atmosphere || 'Not specified'}</p>\n              </div>\n              \n              <div className=\"info-section\">\n                <h5>Your Character</h5>\n                <p><strong>Name:</strong> {character?.name || 'Unnamed'}</p>\n                <p><strong>Age:</strong> {character?.age || 'Not specified'}</p>\n              </div>\n              \n              <div className=\"info-section\">\n                <h5>Other Characters</h5>\n                {scenario?.otherCharacters?.map((char, index) => (\n                  <div key={index} className=\"other-character\">\n                    <p><strong>{char.name}</strong> ({char.role})</p>\n                    <p>{char.description}</p>\n                  </div>\n                )) || <p>No other characters specified.</p>}\n              </div>\n              \n              <div className=\"info-section\">\n                <h5>Narrative Goals</h5>\n                <p>{scenario?.narrativeGoals || 'No specific goals set.'}</p>\n              </div>\n              \n              <div className=\"info-section\">\n                <h5>Tone & Themes</h5>\n                <p>{scenario?.toneAndThemes || 'Not specified'}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}